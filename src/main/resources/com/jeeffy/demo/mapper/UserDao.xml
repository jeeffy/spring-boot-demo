<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.jeeffy.demo.dao.UserDao">
    <resultMap id="userMap" type="com.jeeffy.demo.bean.User">
		<id property="userId" column="user_id"/>
		<result property="userAccount" column="user_account"/>
		<result property="userPswd" column="user_pswd"/>
		<result property="userDeptId" column="user_dept_id"/>
		<result property="userCode" column="user_code"/>
		<result property="userName" column="user_name"/>
		<result property="userSex" column="user_sex"/>
		<result property="userPhone" column="user_phone"/>
		<result property="userType" column="user_type"/>
		<result property="userMail" column="user_mail"/>
		<result property="userIsdel" column="user_isdel"/>
		<result property="userPy" column="user_py"/>
		<result property="userWb" column="user_wb"/>
		<result property="userRemark" column="user_remark"/>
		<result property="userCreateDate" column="user_create_date"/>
		<result property="userUpdateDate" column="user_update_date"/>
		<result property="userCreateUser" column="user_create_user"/>
		<result property="userUpdateUser" column="user_update_user"/>

    </resultMap>
    
    <sql id="queryCondition">
        <where>
			<if test="userId != null and userId != ''">
				and user_id = #{userId}
			</if>
			<if test="userAccount != null and userAccount != ''">
				and user_account = #{userAccount}
			</if>
			<if test="userPswd != null and userPswd != ''">
				and user_pswd = #{userPswd}
			</if>
			<if test="userDeptId != null and userDeptId != ''">
				and user_dept_id = #{userDeptId}
			</if>
			<if test="userCode != null and userCode != ''">
				and user_code = #{userCode}
			</if>
			<if test="userName != null and userName != ''">
				and user_name = #{userName}
			</if>
			<if test="userSex != null and userSex != ''">
				and user_sex = #{userSex}
			</if>
			<if test="userPhone != null and userPhone != ''">
				and user_phone = #{userPhone}
			</if>
			<if test="userType != null and userType != ''">
				and user_type = #{userType}
			</if>
			<if test="userMail != null and userMail != ''">
				and user_mail = #{userMail}
			</if>
			<if test="userIsdel != null and userIsdel != ''">
				and user_isdel = #{userIsdel}
			</if>
			<if test="userPy != null and userPy != ''">
				and user_py = #{userPy}
			</if>
			<if test="userWb != null and userWb != ''">
				and user_wb = #{userWb}
			</if>
			<if test="userRemark != null and userRemark != ''">
				and user_remark = #{userRemark}
			</if>
			<if test="userCreateDate != null and userCreateDate != ''">
				and user_create_date = #{userCreateDate}
			</if>
			<if test="userUpdateDate != null and userUpdateDate != ''">
				and user_update_date = #{userUpdateDate}
			</if>
			<if test="userCreateUser != null and userCreateUser != ''">
				and user_create_user = #{userCreateUser}
			</if>
			<if test="userUpdateUser != null and userUpdateUser != ''">
				and user_update_user = #{userUpdateUser}
			</if>

        </where>
    </sql>
    	
    <select id="getByMap" parameterType="map" resultMap="userMap">
    	SELECT * FROM sys_user
		<include refid="queryCondition" />
    </select>
    
    <select id="getById" parameterType="int" resultMap="userMap">
    	SELECT * FROM sys_user WHERE user_id =#{userId}
    </select>
    
    <insert id="create" parameterType="com.jeeffy.demo.bean.User">
        <selectKey resultType="int"  order="AFTER" keyProperty="userId" >
			SELECT LAST_INSERT_ID()
		</selectKey>
		INSERT INTO sys_user(
			user_id,
			user_account,
			user_pswd,
			user_dept_id,
			user_code,
			user_name,
			user_sex,
			user_phone,
			user_type,
			user_mail,
			user_isdel,
			user_py,
			user_wb,
			user_remark,
			user_create_date,
			user_update_date,
			user_create_user,
			user_update_user
		)VALUES(
			#{userId},
			#{userAccount},
			#{userPswd},
			#{userDeptId},
			#{userCode},
			#{userName},
			#{userSex},
			#{userPhone},
			#{userType},
			#{userMail},
			#{userIsdel},
			#{userPy},
			#{userWb},
			#{userRemark},
			now(),
			now(),
			1,
			1
		)
    </insert>
    
    <update id="update" parameterType="com.jeeffy.demo.bean.User">
		UPDATE sys_user SET
			user_account = #{userAccount},
			user_pswd = #{userPswd},
			user_dept_id = #{userDeptId},
			user_code = #{userCode},
			user_name = #{userName},
			user_sex = #{userSex},
			user_phone = #{userPhone},
			user_type = #{userType},
			user_mail = #{userMail},
			user_isdel = #{userIsdel},
			user_py = #{userPy},
			user_wb = #{userWb},
			user_remark = #{userRemark}
		WHERE user_id = #{userId}
    </update>
    
    <delete id="delete" parameterType="int">
    	DELETE FROM sys_user WHERE user_id = #{userId}
    </delete>
    
</mapper>